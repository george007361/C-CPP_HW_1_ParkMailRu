language: c

addons:
  apt:
    packages:
      - cmake
      - cppcheck
      - valgrind

before_install:
  - pip install gcovr
  - pip install cpplint

before_script:
  - mkdir build
  - cd build
  - cmake ..
  - make

jobs:
  include:
    - stage: running gtests
      script: ./gtesting

    - stage: valgrind
      script: valgrind --tool=memcheck --leak-check=full ./main < ../in.txt

    - stage: cppcheck
      script: 
        - cd ../
        - cppcheck --error-exitcode=1 *.c
      
    - stage: cpplint
      script: python -m cpplint *.c
